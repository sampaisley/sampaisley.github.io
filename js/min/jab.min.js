'use strict';let jabber=document.getElementById("jabber"),container=document.getElementById("container"),score=document.getElementById("score"),sound1=new Audio("aaggh.mp3"),sound2=new Audio("aaggh2.mp3"),sound3=new Audio("aaggh3.mp3"),start=new Audio("start.mp3"),sounds=[sound2,sound3,sound1];function makeNewPosition(b){return[Math.floor(Math.random()*(b.offsetHeight-target.offsetHeight)),Math.floor(Math.random()*(b.offsetWidth-target.offsetWidth))]}
function velocity(b,a){let c=Math.abs(b[1]-a[1]);b=Math.abs(b[0]-a[0]);return Math.ceil((c>b?c:b)/.3)}function floatArm(){let b=makeNewPosition(container),a=target.offsetTop,c=target.offsetLeft;target.animate([{top:a+"px",left:c+"px"},{top:b[0]+"px",left:b[1]+"px"}],{duration:velocity([a,c],b),easing:"ease-in-out",fill:"forwards"}).onfinish=function(){floatArm()}}let target=document.createElement("img");target.id="target";target.onload=function(){floatArm()};target.src="../img/arm2.png";container.appendChild(target);
function isMob(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:!1}isMob()||(target.onclick=function(){hit()});target.ondragstart=jabber.ondragstart=function(){return!1};container.onmousemove=function(b){jabber.style.left=b.x-100+"px";jabber.style.top=b.y+"px"};let hits=0;
function hit(){2<hits||(sounds[hits].play(),floatArm(),score.innerHTML=++hits,score.classList.add("show"),setTimeout(function(){score.classList.remove("show")},500),3<=hits&&(jabber.remove(),target.classList.add("fadeArm"),setTimeout(function(){container.classList.add("default");target.remove();container.classList.add("happy");container.innerHTML="<h1 id='happy'>Happy New Year</h1>"},1500)))}container.addEventListener("click",function(b){"happy"==b.target.id&&location.reload()});
if(isMob()){let b=0;target.ontouchstart=function(){0==b?(start.play(),setTimeout(hit,200),b++):hit()};container.ontouchmove=container.ontouchstart=function(a){a.preventDefault();a.stopPropagation();a=a.changedTouches[0];jabber.style.left=a.clientX-100+"px";jabber.style.top=a.clientY+"px"};container.addEventListener("touchend",function(a){a.preventDefault();a.stopPropagation();a=a.changedTouches[0];a=document.elementFromPoint(a.clientX,a.clientY);"target"!=a.id&&"happy"==a.id&&location.reload()})};