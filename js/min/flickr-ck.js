function wordInString(e,t){return new RegExp("\\b"+t+"\\b","gi").test(e)}function setImage(){theImage.src=_Y+_X-1<images.length?images[_Y+_X-1][0]:"http://vapordirect.ie/template/eshop/images/no_product_photo.jpg"}function setTitle(){title.innerHTML="Title: "+images[_Y+_X-1][2]}function makeArray(e){images=[];for(var t=0;t<jso.photos.photo.length;++t)if(wordInString(jso.photos.photo[t].tags,e)){var o="http://farm"+jso.photos.photo[t].farm+".staticflickr.com/"+jso.photos.photo[t].server+"/"+jso.photos.photo[t].id+"_"+jso.photos.photo[t].secret+"_m.jpg";tag=jso.photos.photo[t].tags,tit=jso.photos.photo[t].title,images.push([o,tag,tit])}}function jsonFlickrApi(e){jso=e,makeArray(tag),setImage(),setTitle()}function onDragMove(e){_X=e.position.x/grid_size+1,_Y=Math.floor(e.position.y/grid_size*squaresAccross),elem.innerHTML=_Y+_X}function onDragEnd(){setImage(),setTitle()}function changeSet(e){makeArray(tag=e),tagName.innerHTML="Tag: "+e,setImage(),setTitle()}var elem=document.querySelector("#draggable"),theImage=document.querySelector("#theImage"),title=document.querySelector("#title"),tit,grid_size=elem.clientWidth,wide=document.querySelector("#strips").clientWidth,squaresAccross=wide/grid_size,images=[],jso={},tag="field",_X=0,_Y=1;document.flickrURL="https://api.flickr.com/services/rest/?method=flickr.people.getPhotos&api_key=2fdc79859cd894e55ee6fb2d0a4e6acf&user_id=100786833%40N08&extras=tags&format=json";var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.setAttribute("src",document.flickrURL),document.head.appendChild(script);var draggie=new Draggabilly(elem,{grid:[grid_size,grid_size],containment:!0});draggie.on("dragMove",onDragMove),draggie.on("dragEnd",onDragEnd);var france=document.querySelector("#france"),field=document.querySelector("#field"),sea=document.querySelector("#sea"),tagName=document.querySelector("#tagName");tagName.innerHTML="Tag: "+tag,france.onclick=field.onclick=sea.onclick=function(){changeSet(this.getAttribute("id"))},elem.ondblclick=function(){alert("Don't click it dumbo, drag it")};