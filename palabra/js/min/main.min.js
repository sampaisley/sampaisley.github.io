'use strict';Storage.prototype.setObj=function(a,b){return this.setItem(a,JSON.stringify(b))};Storage.prototype.getObj=function(a){return JSON.parse(this.getItem(a))};
(function(){var a="qwertyuiop".split(""),b="asdfghjkl".split("");let d="Enter z x c v b n m Backspace".split(" "),c=document.getElementById("container");for(var e=0;30>e;e++)c.innerHTML+='<div class="box">&nbsp;</div>';e=document.createElement("div");e.id="alert";e.classList.add("alert");e.classList.add("d-none");const l=document.createElement("div");l.id="kbord";const g=document.createElement("div");g.id="kBoardTop";const h=document.createElement("div");h.id="kBoardMid";const f=document.createElement("div");
f.id="kBoardLow";g.innerHTML+='<div id="topRow">';for(let k=0;10>k;k++)g.innerHTML+=`<div data-l='${a[k]}' class="pad top">${a[k]}</div>`;g.innerHTML+="</div>";h.innerHTML+='<div id="midRow">';for(a=0;9>a;a++)h.innerHTML+=`<div data-l='${b[a]}' class="pad mid">${b[a]}</div>`;h.innerHTML+="</div>";f.innerHTML+='<div id="lowRow">';for(b=0;9>b;b++)f.innerHTML=0==b?f.innerHTML+`<div id='enter' data-l='${d[b]}' class="padLong low"><img id="enterIcon"  data-l='${d[b]}' src="svg/ent.svg" /></div>`:8==b?
f.innerHTML+`<div id='back' data-l='${d[b]}' class="padLong low"><img id="backIcon"  data-l='${d[b]}' src="svg/back.svg" /></div>`:f.innerHTML+`<div data-l='${d[b]}' class="pad low">${d[b]}</div>`;f.innerHTML+="</div>";c.after(l);l.append(g);g.after(h);h.after(f);f.after(e)})();let boxes=document.querySelectorAll(".box");
const keys=(()=>{const a=[...Array(26)].map((b,d)=>String.fromCharCode(d+65));return a.concat(a.map(b=>b.toLowerCase()))})(),oneDay=864E5,firstDate=(new Date(" Feb 19 2022")).setHours(0,0,0,0),today=(new Date).setHours(0,0,0,0),diffDays=Math.round(Math.abs((firstDate-today)/oneDay));let theWord=Array.from(wordList[diffDays]),copy=Array.from(theWord),wordLength=5,inputWord=[],triedWords=localStorage.getObj("triedWords")||[];$("#list").text(wordList[diffDays]);
let lettersCorect=0,enterKeyWorks=!1,savedClasses=localStorage.getObj("savedClasses")||[],pads=document.querySelectorAll(".pad"),greenKeys=[],blackKeys=[],orangeKeys=[],score=localStorage.getObj("storeScore")||{gamesPlayed:0,level:0,pastLevels:[],lastPlayed:today,streak:1,maxStreak:1,gameOver:!1};
score.lastPlayed!=today?(triedWords=[],savedClasses=[],localStorage.setObj("triedWords",null),localStorage.setObj("savedClasses",null),localStorage.setObj("blakKeys",null),localStorage.setObj("greenKeys",null),localStorage.setObj("orangeKeys",null),localStorage.removeItem("box"),localStorage.removeItem("start"),localStorage.removeItem("end"),localStorage.removeItem("rowPad")):setClasses();
let box=parseInt(localStorage.getItem("box"))||0,start=parseInt(localStorage.getItem("start"))||0,end=parseInt(localStorage.getItem("end"))||start+wordLength,rowPad=parseInt(localStorage.getItem("rowPad"))||0;0<box&&0!=box+1%wordLength&&(box-=box%rowPad);window.onkeydown=a=>{1!=score.gameOver&&("Enter"==a.key&&enterPressed(a.key),makeWord(a.key))};
function makeWord(a){if(-1!=keys.indexOf(a)&&box<end){if(29<box||lettersCorect>=wordLength)return;0==box%wordLength&&(enterKeyWorks=!0);boxes[box].classList.add("darkBorder");boxes[box++].innerHTML=a;localStorage.setItem("box",box);inputWord.push(a.toLowerCase())}"Backspace"==a&&box>start&&(inputWord.pop(),boxes[--box].innerHTML="",localStorage.setItem("box",box),boxes[box].classList.remove("darkBorder"))}
function enterPressed(a){25<rowPad||(inputWord.length&&inputWord.length<wordLength?alertz("Word too short",1200):!isInWordList()&&inputWord.length&&inputWord.length==wordLength?alertz("Not in word list.",1200):"Enter"==a&&0==box%wordLength&&box<=boxes.length&&enterKeyWorks&&(enterKeyWorks=!enterKeyWorks,start+=5,localStorage.setItem("start",start),end+=5,localStorage.setItem("end",end),checkWord()))}
function checkWord(){copy=Array.from(theWord);triedWords.push(Array.from(inputWord));localStorage.setObj("triedWords",triedWords);inputWord.forEach((a,b,d)=>{inputWord[b]==theWord[b]?(greenKeys.push(inputWord[b]),savedClasses[b+rowPad]="green",localStorage.setObj("savedClasses",savedClasses),localStorage.setObj("greenKeys",greenKeys),copy[b]=null,inputWord[b]="*",lettersCorect++==wordLength-1&&winner()):(blackKeys.push(inputWord[b]),savedClasses[b+rowPad]="black",localStorage.setObj("savedClasses",
savedClasses),localStorage.setObj("blakKeys",blackKeys),lettersCorect=0)});orange();inputWord.length=0;rowPad+=5;localStorage.setItem("rowPad",rowPad);score.lastPlayed=(new Date).setHours(0,0,0,0);localStorage.setObj("storeScore",score);setKeyCoulors();lettersCorect<wordLength-1&&box>boxes.length-1&&(failed(),lettersCorect=0);setClasses()}
function orange(){for(let a=0;a<wordLength;a++){let b=copy.indexOf(inputWord[a]);-1!=b&&(savedClasses[a+rowPad]="yellow",localStorage.setObj("savedClasses",savedClasses),orangeKeys.push(inputWord[a]),localStorage.setObj("orangeKeys",orangeKeys),copy[b]="]")}}function isInWordList(){let a=inputWord.join("");return wordList.includes(a)||Ta.includes(a)?!0:!1}
function winner(){score.gameOver=1;if(null!==localStorage.getObj("storeScore")){var a=(new Date(localStorage.getObj("storeScore").lastPlayed)).setHours(0,0,0,0);1===Math.round(Math.abs((today-a)/oneDay))?(score.streak++,score.streak>=score.maxStreak&&(score.maxStreak=score.streak)):score.streak=1}score.gamesPlayed++;score.level=rowPad/wordLength+1;score.pastLevels.push(score.level);localStorage.setObj("storeScore",score);a=localStorage.getObj("storeScore");alertz(`Well done dear!<br>
 Games played: ${a.gamesPlayed}<br>Level: ${a.level}<br>Streak: ${a.streak}<br>Max Streak: ${a.maxStreak}<br> Level Distribution:<br>${getLevelDis(a.pastLevels)}`)}function getLevelDis(a){let b="",d=function(c){return a.filter(e=>e==c).length};for(let c=1;6>=c;c++)b+=`<span class="levs lv-${d(c)}">level ${c} --> ${d(c)}</span><br>`;return b}
function failed(){score.gameOver=1;score.level=0;score.pastLevels.push(score.level);score.lastPlayed=(new Date).setHours(0,0,0,0);score.gamesPlayed++;localStorage.setObj("storeScore",score);let a=localStorage.getObj("storeScore");setTimeout(()=>alertz(`Never mind dear, the word is ${theWord.join("").toUpperCase()}
      <br>
      Games played: ${a.gamesPlayed}<br>Level: ${a.level}<br>Max Streak: ${a.maxStreak}<br> Level Distribution:<br>${getLevelDis(a.pastLevels)}`),1E3)}function setKeyCoulors(){for(let a=0;a<pads.length;a++)blackKeys.includes(pads[a].getAttribute("data-l"))&&pads[a].classList.add("blackKey"),orangeKeys.includes(pads[a].getAttribute("data-l"))&&pads[a].classList.add("orangeKey"),greenKeys.includes(pads[a].getAttribute("data-l"))&&pads[a].classList.add("greenKey")}let letter;
window.addEventListener("click",a=>{1!=score.gameOver&&(a.target.hasAttribute("data-l")&&(letter=a.target.getAttribute("data-l"),makeWord(letter)),"Enter"==letter&&enterPressed(letter),letter=null)});let aalert=$("#alert");function alertz(a,b){aalert.takeClass("d-none").fadeUp(100).text('<p class="alert">'+a+"</p>");a=$(".alert").eq(1).getRect().height;a=window.innerHeight/2-a/2-20;$(".alert").eq(1).css({"margin-top":`${a}px`});b&&setTimeout(closeAlertz,b)}
window.addEventListener("click",function(a){a.target.classList.contains("alert")&&closeAlertz()});function closeAlertz(){aalert.fade(50,!1,function(){aalert.putClass("d-none").text("")})}score.lastPlayed<today?(score.gameOver=0,localStorage.setObj("storeScore",score)):setClasses();
function setClasses(){var a=localStorage.getObj("blakKeys"),b=localStorage.getObj("greenKeys"),d=localStorage.getObj("orangeKeys");for(var c=0;c<pads.length;c++)a&&-1!=a.indexOf(pads[c].getAttribute("data-l"))&&(pads[c].classList.contains("greenKey")||pads[c].classList.add("blackKey")),d&&-1!=d.indexOf(pads[c].getAttribute("data-l"))&&(pads[c].classList.contains("greenKey")||pads[c].classList.add("orangeKey")),b&&-1!=b.indexOf(pads[c].getAttribute("data-l"))&&pads[c].classList.add("greenKey");b=localStorage.getObj("triedWords")||
[];a=localStorage.getObj("savedClasses")||[];c=d=0;for(let e=0;e<boxes.length&&!(d>=b.length);)boxes[c++].innerHTML=b[d][e++],0==e%wordLength&&(d++,e=0);for(b=0;b<boxes.length;b++)boxes[b].classList.add(a[b])}$(".box").eq(29).css({cursor:"pointer"}).on("dblclick",function(){localStorage.clear();alertz("storage cleared.")});