'use strict';Storage.prototype.setObj=function(a,b){return this.setItem(a,JSON.stringify(b))};Storage.prototype.getObj=function(a){return JSON.parse(this.getItem(a))};
(function(){var a="qwertyuiop".split(""),b="asdfghjkl".split("");let d="Enter z x c v b n m Backspace".split(" "),c=document.getElementById("container");for(var f=0;30>f;f++)c.innerHTML+='<div class="box">&nbsp;</div>';f=document.createElement("div");f.id="alert";f.classList.add("alert");f.classList.add("d-none");const g=document.createElement("div");g.id="kBoardTop";const h=document.createElement("div");h.id="kBoardMid";const e=document.createElement("div");e.id="kBoardLow";g.innerHTML+='<div id="topRow">';
for(let k=0;10>k;k++)g.innerHTML+=`<div data-l='${a[k]}' class="pad top">${a[k]}</div>`;g.innerHTML+="</div>";h.innerHTML+='<div id="midRow">';for(a=0;9>a;a++)h.innerHTML+=`<div data-l='${b[a]}' class="pad mid">${b[a]}</div>`;h.innerHTML+="</div>";e.innerHTML+='<div id="lowRow">';for(b=0;9>b;b++)e.innerHTML=0==b?e.innerHTML+`<div id='enter' data-l='${d[b]}' class="padLong low">${d[b]}</div>`:8==b?e.innerHTML+`<div id='back' data-l='${d[b]}' class="padLong low">&#8592;</div>`:e.innerHTML+`<div data-l='${d[b]}' class="pad low">${d[b]}</div>`;
e.innerHTML+="</div>";c.after(g);g.after(h);h.after(e);e.after(f)})();let box=0,start=0,end=start+5,boxes=document.querySelectorAll(".box");const keys=(()=>{const a=[...Array(26)].map((b,d)=>String.fromCharCode(d+65));return a.concat(a.map(b=>b.toLowerCase()))})(),oneDay=864E5,firstDate=(new Date(" Feb 06 2022")).setHours(0,0,0,0),today=(new Date).setHours(0,0,0,0),diffDays=Math.round(Math.abs((firstDate-today)/oneDay));
let theWord=Array.from(wordList[diffDays]),copy=Array.from(theWord),wordLength=5,inputWord=[],triedWords=localStorage.getObj("triedWords")||[],rowPad=0,lettersCorect=0,enterKeyWorks=!1,greenKeys=[],blackKeys=[],orangeKeys=[],greenBoxes=[],blackBoxes=[],orangeBoxes=[],score=localStorage.getObj("storeScore")||{gamesPlayed:0,level:0,pastLevels:[],lastPlayed:null,streak:1,maxStreak:1,gameOver:!1};window.onkeydown=a=>{1!=score.gameOver&&("Enter"==a.key&&enterPressed(a.key),makeWord(a.key))};
function makeWord(a){if(-1!=keys.indexOf(a)&&box<end){if(29<box||lettersCorect>=wordLength)return;0==box%wordLength&&(enterKeyWorks=!0);boxes[box].classList.add("darkBorder");boxes[box++].innerHTML=a;inputWord.push(a.toLowerCase())}"Backspace"==a&&box>start&&(inputWord.pop(),boxes[--box].innerHTML="",boxes[box].classList.remove("darkBorder"))}
function enterPressed(a){25<rowPad||(inputWord.length&&inputWord.length<wordLength?alertz("Word too short",1200):!isInWordList()&&inputWord.length&&inputWord.length==wordLength?alertz("Not in word list.",1200):"Enter"==a&&0==box%wordLength&&box<=boxes.length&&enterKeyWorks&&(enterKeyWorks=!enterKeyWorks,start+=5,end+=5,checkWord()))}
function checkWord(){copy=Array.from(theWord);triedWords.push(Array.from(inputWord));localStorage.setObj("triedWords",triedWords);inputWord.forEach((a,b,d)=>{inputWord[b]==theWord[b]?(greenKeys.push(inputWord[b]),localStorage.setObj("greenKeys",greenKeys),boxes[b+rowPad].classList.add("green"),copy[b]=null,inputWord[b]="*",lettersCorect++==wordLength-1&&(saveBoxClasses(),winner())):(boxes[b+rowPad].classList.add("black"),blackKeys.push(inputWord[b]),localStorage.setObj("blakKeys",blackKeys),lettersCorect=
0)});orange();inputWord.length=0;rowPad+=5;setKeyCoulors();lettersCorect<wordLength-1&&box>boxes.length-1&&failed()}function orange(){for(let a=0;a<wordLength;a++){let b=copy.indexOf(inputWord[a]);-1!=b&&(boxes[a+rowPad].classList.add("yellow"),orangeKeys.push(inputWord[a]),localStorage.setObj("orangeKeys",orangeKeys),copy[b]="]")}}function isInWordList(){let a=inputWord.join("");return wordList.includes(a)||Ta.includes(a)?!0:!1}
function winner(){score.gameOver=1;1==Math.round(Math.abs((score.lastPlayed-today)/oneDay))?(score.streak++,score.streak>=score.maxStreak&&(score.maxStreak=score.streak)):score.streak=1;score.gamesPlayed++;score.level=rowPad/wordLength+1;score.pastLevels.push(score.level);score.lastPlayed=(new Date).setHours(0,0,0,0);localStorage.setObj("storeScore",score);let a=localStorage.getObj("storeScore");alertz(`Well done dear!<br>
 Games played: ${a.gamesPlayed}<br>Level: ${a.level}<br>Streak: ${a.streak}<br>Max Streak: ${a.maxStreak}<br> Level Distribution:<br>${getLevelDis(a.pastLevels)}`)}function getLevelDis(a){let b="",d=function(c){return a.filter(f=>f==c).length};for(let c=1;6>=c;c++)b+=`<span class="levs lv-${d(c)}">level ${c} --> ${d(c)}</span><br>`;return b}
function failed(){score.gameOver=1;score.level=0;score.pastLevels.push(score.level);score.lastPlayed=(new Date).setHours(0,0,0,0);score.gamesPlayed++;localStorage.setObj("storeScore",score);let a=localStorage.getObj("storeScore");setTimeout(()=>alertz(`Never mind dear, the word is ${theWord.join("").toUpperCase()}
    Level: ${a.level}
    games played: ${a.gamesPlayed}`),1E3)}let pads=document.querySelectorAll(".pad");
function setKeyCoulors(){for(let a=0;a<pads.length;a++)blackKeys.includes(pads[a].getAttribute("data-l"))&&pads[a].classList.add("blackKey"),orangeKeys.includes(pads[a].getAttribute("data-l"))&&(pads[a].classList.remove("blackKey"),pads[a].classList.add("orangeKey")),greenKeys.includes(pads[a].getAttribute("data-l"))&&(pads[a].classList.remove("blackKey"),pads[a].classList.remove("orangeKey"),pads[a].classList.add("greenKey"))}let letter;
window.addEventListener("click",a=>{1!=score.gameOver&&(a.target.hasAttribute("data-l")&&(letter=a.target.getAttribute("data-l"),makeWord(letter)),"Enter"==letter&&enterPressed(letter),letter=null)});let aalert=$("#alert");function alertz(a,b){aalert.takeClass("d-none").fadeUp(100).text('<p class="alert">'+a+"</p>");a=$(".alert").eq(1).getRect().height;a=window.innerHeight/2-a/2-20;$(".alert").eq(1).css({"margin-top":`${a}px`});b&&setTimeout(closeAlertz,b)}
window.addEventListener("click",function(a){a.target.classList.contains("alert")&&closeAlertz()});function closeAlertz(){aalert.fade(50,!1,function(){aalert.putClass("d-none").text("")})}function saveBoxClasses(){for(let a=0;a<boxes.length;a++);}score.lastPlayed<today?(score.gameOver=0,localStorage.setObj("storeScore",score)):history();
function history(){var a=localStorage.getObj("blakKeys"),b=localStorage.getObj("greenKeys"),d=localStorage.getObj("orangeKeys");for(var c=0;c<pads.length;c++)-1!=a.indexOf(pads[c].getAttribute("data-l"))&&pads[c].classList.add("blackKey"),-1!=b.indexOf(pads[c].getAttribute("data-l"))&&pads[c].classList.add("greenKey"),-1!=d.indexOf(pads[c].getAttribute("data-l"))&&pads[c].classList.add("orangeKey");a=localStorage.getObj("triedWords");d=b=0;for(c=0;c<boxes.length&&!(b>=triedWords.length);c++)boxes[d++].innerHTML=
a[b][c++],0==c%wordLength&&(b++,c=0)};