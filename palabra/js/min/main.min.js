'use strict';Storage.prototype.setObj=function(a,b){return this.setItem(a,JSON.stringify(b))};Storage.prototype.getObj=function(a){return JSON.parse(this.getItem(a))};let topRow="qwertyuiop".split(""),midRow="asdfghjkl".split(""),lowRow="Enter z x c v b n m Backspace".split(" "),container=document.getElementById("container");for(let a=0;30>a;a++)container.innerHTML+='<div class="box">&nbsp;</div>';const alertzDiv=document.createElement("div");alertzDiv.id="alert";alertzDiv.classList.add("alert");
alertzDiv.classList.add("d-none");const kboardTop=document.createElement("div");kboardTop.id="kBoardTop";const kboardMid=document.createElement("div");kboardMid.id="kBoardMid";const kboardLow=document.createElement("div");kboardLow.id="kBoardLow";kboardTop.innerHTML+='<div id="topRow">';for(let a=0;10>a;a++)kboardTop.innerHTML+=`<div data-l='${topRow[a]}' class="pad top">${topRow[a]}</div>`;kboardTop.innerHTML+="</div>";kboardMid.innerHTML+='<div id="midRow">';
for(let a=0;9>a;a++)kboardMid.innerHTML+=`<div data-l='${midRow[a]}' class="pad mid">${midRow[a]}</div>`;kboardMid.innerHTML+="</div>";kboardLow.innerHTML+='<div id="lowRow">';for(let a=0;9>a;a++)kboardLow.innerHTML=0==a?kboardLow.innerHTML+`<div id='enter' data-l='${lowRow[a]}' class="padLong low">${lowRow[a]}</div>`:8==a?kboardLow.innerHTML+`<div id='back' data-l='${lowRow[a]}' class="padLong low">&#8592;</div>`:kboardLow.innerHTML+`<div data-l='${lowRow[a]}' class="pad low">${lowRow[a]}</div>`;
kboardLow.innerHTML+="</div>";container.after(kboardTop);kboardTop.after(kboardMid);kboardMid.after(kboardLow);kboardLow.after(alertzDiv);let box=0,start=0,end=start+5,boxes=document.querySelectorAll(".box");const keys=(()=>{const a=[...Array(26)].map((b,d)=>String.fromCharCode(d+65));return a.concat(a.map(b=>b.toLowerCase()))})(),oneDay=864E5,firstDate=(new Date(" Feb 06 2022")).setHours(0,0,0,0),today=(new Date).setHours(0,0,0,0),diffDays=Math.round(Math.abs((firstDate-today)/oneDay));
let theWord=Array.from(wordList[diffDays]),copy=Array.from(theWord),wordLength=5,inputWord=[],rowPad=0,lettersCorect=0,enterKeyWorks=!1,greenKeys=[],blackKeys=[],orangeKeys=[],score=localStorage.getObj("storeScore")||{gamesPlayed:0,level:0,pastLevels:[],lastPlayed:null,streak:1,maxStreak:1};window.onkeydown=a=>{"Enter"==a.key&&enterPressed(a.key);makeWord(a.key)};
function makeWord(a){if(-1!=keys.indexOf(a)&&box<end){if(29<box||lettersCorect>=wordLength)return;0==box%wordLength&&(enterKeyWorks=!0);boxes[box].classList.add("darkBorder");boxes[box++].innerHTML=a;inputWord.push(a.toLowerCase())}"Backspace"==a&&box>start&&(inputWord.pop(),boxes[--box].innerHTML="",boxes[box].classList.remove("darkBorder"))}
function enterPressed(a){25<rowPad||(inputWord.length&&inputWord.length<wordLength?alertz("Word too short",1200):!isInWordList()&&inputWord.length&&inputWord.length==wordLength?alertz("Not in word list.",1200):"Enter"==a&&0==box%wordLength&&box<=boxes.length&&enterKeyWorks&&(enterKeyWorks=!enterKeyWorks,start+=5,end+=5,checkWord()))}
function checkWord(){copy=Array.from(theWord);inputWord.forEach((a,b,d)=>{inputWord[b]==theWord[b]?(greenKeys.push(inputWord[b]),boxes[b+rowPad].classList.add("green"),copy[b]=null,inputWord[b]="*",lettersCorect++==wordLength-1&&winner()):(boxes[b+rowPad].classList.add("black"),blackKeys.push(inputWord[b]),lettersCorect=0)});orange();inputWord.length=0;rowPad+=5;setKeyCoulors();lettersCorect<wordLength-1&&box>boxes.length-1&&failed()}
function orange(){for(let a=0;a<wordLength;a++){let b=copy.indexOf(inputWord[a]);-1!=b&&(boxes[a+rowPad].classList.add("yellow"),orangeKeys.push(inputWord[a]),copy[b]="]")}}function isInWordList(){let a=inputWord.join("");return wordList.includes(a)||Ta.includes(a)?!0:!1}
function winner(){1==Math.round(Math.abs((score.lastPlayed-today)/oneDay))?(score.streak++,score.streak>=score.maxStreak&&(score.maxStreak=score.streak)):score.streak=1;score.gamesPlayed++;score.level=rowPad/wordLength+1;score.pastLevels.push(score.level);score.lastPlayed=(new Date).setHours(0,0,0,0);localStorage.setObj("storeScore",score);let a=localStorage.getObj("storeScore");alertz(`Well done dear!<br>
 Games played: ${a.gamesPlayed}<br>Level: ${a.level}<br>Streak: ${a.streak}<br>Max Streak: ${a.maxStreak}<br> Level Distribution:<br>${getLevelDis(a.pastLevels)}`)}function getLevelDis(a){let b="",d=function(c){return a.filter(e=>e==c).length};for(let c=1;6>=c;c++)b+=`<span class="levs lv-${d(c)}">level ${c} --> ${d(c)}</span><br>`;return b}
function failed(){score.level=0;score.pastLevels.push(score.level);score.lastPlayed=(new Date).setHours(0,0,0,0);score.gamesPlayed++;localStorage.setObj("storeScore",score);let a=localStorage.getObj("storeScore");setTimeout(()=>alertz(`Never mind dear, the word is ${theWord.join("").toUpperCase()}
    Level: ${a.level}
    games played: ${a.gamesPlayed}`),1E3)}let pads=document.querySelectorAll(".pad");
function setKeyCoulors(){for(let a=0;a<pads.length;a++)blackKeys.includes(pads[a].getAttribute("data-l"))&&pads[a].classList.add("blackKey"),orangeKeys.includes(pads[a].getAttribute("data-l"))&&(pads[a].classList.remove("blackKey"),pads[a].classList.add("orangeKey")),greenKeys.includes(pads[a].getAttribute("data-l"))&&(pads[a].classList.remove("blackKey"),pads[a].classList.remove("orangeKey"),pads[a].classList.add("greenKey"))}let letter;
window.addEventListener("click",a=>{a.target.hasAttribute("data-l")&&(letter=a.target.getAttribute("data-l"),makeWord(letter));"Enter"==letter&&enterPressed(letter);letter=null});let aalert=$("#alert");function alertz(a,b){aalert.takeClass("d-none").fadeUp(100).text('<p class="alert">'+a+"</p>");a=$(".alert").eq(1).getRect().height;a=window.innerHeight/2-a/2-20;$(".alert").eq(1).css({"margin-top":`${a}px`});b&&setTimeout(closeAlertz,b)}
window.addEventListener("click",function(a){a.target.classList.contains("alert")&&closeAlertz()});function closeAlertz(){aalert.fade(50,!1,function(){aalert.putClass("d-none").text("")})}let s=localStorage.getObj("storeScore");alertz(`Well done dear.<br>
 Games played: ${s.gamesPlayed}<br>Level: ${s.level}<br>Streak: ${s.streak}<br>Max Streak: ${s.maxStreak}<br> Level Distribution:<br>${getLevelDis(s.pastLevels)}`);